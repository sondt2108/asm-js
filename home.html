<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hiển thị sản phẩm</title>
    <script src="hoTro.js"></script>
    <script src="sanPham.js"></script>
    <script src="them-san-pham.html"></script>
    <script src="gio-hang.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://kit.fontawesome.com/f20d460fd9.js" crossorigin="anonymous"></script>



</head>

<body>
    <div id="hearder-full">
        <div class="hearder">
            <div class="logo">
                <a href="home.html"> <img
                        src="https://ciaotravel.com.vn/wp-content/uploads/2015/08/logo_he_thong_24hstorevn_FULL_PNG1.png"
                        alt="" srcset=""> </a>
            </div>
            <div class="seach">
                <div class="timKiem">
                    <input type="text" placeholder="Tìm Kiếm">
                    <input type="button" value="Tìm">
                </div>
            </div>
            <div class="hotLine">
                Liên hệ: 19001717
            </div>
        </div>
        <div class="menu">
            <!-- menu -->
            <nav id="nav-bar">
                <ul class="menu-lv1">
                    <li class="item-lv1">
                        <a href="home.html" class="item-lv1-title">Trang Chủ</a>
                    </li>
                    <li class="item-lv1">
                        <a href="#" class="item-lv1-title">Điện thoại</a>
                        <ul class="menu-lv2">
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">SamSung</a>
                            </li>
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">Iphone</a>
                            </li>
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">Xaomi</a>
                            </li>
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">Oppo</a>
                            </li>
                        </ul>
                    </li>
                    <li class="item-lv1">
                        <a href="#" class="item-lv1-title">Laptop</a>
                        <ul class="menu-lv2">
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">Asus</a>
                            </li>
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">Dell</a>
                            </li>
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">Acer</a>
                            </li>
                            <li class="item-lv2">
                                <a href="#" class="item-lv2-title">Hp</a>
                            </li>
                        </ul>
                    </li>
                    <li class="item-lv1">
                        <a href="#" class="item-lv1-title">Phụ kiện</a>
                    </li>
                    <li class="item-lv1">
                        <a href="#" class="item-lv1-title">Liên Hệ</a>
                    </li>
                    <li class="item-lv1">
                        <a href="#" class="item-lv1-title">Giới thiệu</a>
                    </li>
                    <li class="item-lv1">
                        <a href="them-san-pham.html" class="item-lv1-title">Thêm sản phẩm</a>
                    </li>
                    <li class="item-lv1">
                        <a href='gioHang.html'><i class="fas fa-cart-plus"></i></a>

                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="slider">
        <div class="anh">
            <div class="sliderShow">
                <div class="mySlides">
                    <img src="https://cdn.tgdd.vn/2020/05/banner/oppoa91-800-300-800x300-1.png">
                </div>

                <div class="mySlides">
                    <img src="https://cdn.tgdd.vn/2020/05/banner/800-300-800x300-4.png">
                </div>

                <div class="mySlides">
                    <img src="https://cdn.tgdd.vn/2020/05/banner/800-300-800x300.png">
                </div>

                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                <a class="next" onclick="plusSlides(1)">&#10095;</a>
            </div>

            <div class="tcn">
                <div class="spm">
                    <img src="https://images.fpt.shop/unsafe/fit-in/385x88/filters:quality(90):fill(white)/cdn.fptshop.com.vn/Uploads/Originals/2020/5/4/637241964152773243_A11-A31-H2.png"
                        alt="">
                </div>
                <div class="spm">
                    <img src="https://cdn.tgdd.vn/2020/05/banner/2ED22C0B-154B-4108-B279-0793C8E4B76C-398x110.png"
                        alt="">
                </div>
                <div class="spm">
                    <img src="https://cdn.tgdd.vn/2020/05/banner/sticky-a51-398-110-398x110.png" alt="">
                </div>
            </div>
        </div>
        <br>
        <div style="text-align:center">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>
    </div>
    <!-- nội dung chính -->
    <main>
        <div class="bc">
            <img src="https://cdn.tgdd.vn/2020/05/banner/1200x75(12)(1)-1200x75.png">
        </div>
        <div class="dienThoai">
            <p>ĐIỆN THOẠI NỔI BẬT NHẤT</p>
        </div>
        <div id="hien-thi-san-pham">
            <!-- đây là chỗ hiển thị sp -->
            <!-- gắn html vào đối tượng -->
    </main>
    <!-- footer -->
    <footer>
        <div class="service">
            <div class="dichvu">
                <div class="cs">
                    <p><i class="fas fa-shipping-fast"></i> Vận chuyển miễn phí</p>
                </div>
                <div class="cs">
                    <p><i class="fas fa-hand-holding-usd"></i> 20 ngày đổi trả miễn phí</p>
                </div>
                <div class="cs">
                    <p><i class="far fa-address-card"></i> Bảo hành 18 tháng</p>
                </div>
                <div class="cs">
                    <p><i class="fas fa-archive"></i> Bảo hiểm rơi vỡ mặt kính</p>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="ttct">
                <p><b>24HSTORE.VN</b></p>
                <p>Giới thiệu công ty</p>
                <p>Tin tức</p>
                <p>Tuyển dụng</p>
                <p>Liên hệ</p>
                <p>Hệ thống cửa hàng</p>
                <img src="https://24hstore.vn/upload_images/images/2019/09/10/linhkien.jpg" alt="">
            </div>
            <div class="ttct">
                <p><b>QUY ĐỊNH - CHÍNH SÁCH</b></p>
                <p>Chính sách bảo hành</p>
                <p>Chính sách đổi trả</p>
                <p>Giao hàng và thanh toán</p>
                <p>Chính sách bảo mật</p>
                <p>Mua trả góp</p>
                <img src="https://24hstore.vn/upload_images/images/2019/09/10/chamsoc.jpg" alt="">
            </div>
            <div class="ttct">
                <p><b>HỖ TRỢ KHÁCH HÀNG </b> </p>
                <p>Tổng Đài Mua Hàng:</p>
                <p><i class="fas fa-phone-alt"></i> 19000351 - 0988242424 </p>
                <p>Tổng Đài Sửa Chữa/ Bảo Hành:</p>
                <p><i class="fas fa-phone-alt"></i> 19000213 - 0788242424</p>
                <p>Phản Ánh Chất Lượng:</p>
                <p><i class="fas fa-phone-alt"></i> 0985242424</p>
                <p><i class="fab fa-facebook"></i></p>
            </div>
            <div class="ttct">
                <p><b>HỆ THỐNG SHOWROOM</b> </p>
                <p><i class="fas fa-map-marker-alt"> </i> 413 Hoàng Văn Thụ, P.2, Q. Tân Bình</p>
                <p><i class="fas fa-map-marker-alt"> </i> 256 Võ Văn Ngân, Bình Thọ, Thủ Đức </p>
                <p><i class="fas fa-map-marker-alt"> </i> 389 Quang Trung, P.10, Q. Gò Vấp</p>
                <p><i class="fas fa-map-marker-alt"> </i> 418 Nguyễn Trãi, P.8, Q.5</p>
                <p><i class="fas fa-map-marker-alt"> </i> 652 3 Tháng 2, P.14, Q.10</p>
                <p><i class="fas fa-map-marker-alt"> </i> 249 Trần Quang Khải, P. Tân Định, Q.1</p>
                <p><b>Tâm Sửa Chữa & Bảo Hành
                        Bệnh Viện Điện Thoại 24h</b></p>
                <p><i class="fas fa-map-marker-alt"> </i> 1114 3 Tháng 2, P.12, Q11, TPHCM</p>
            </div>
        </div>
    </footer>
    <script>
        /* b1 định nghĩa đối tượng & xây dựng hàm tạo nhanh cho đối tượng */


        var json = JSON.stringify(danhSachSanPham);
        console.log(json);


        var jsonLayTuLocalStorage = localStorage.getItem('danhSachSanPham');
        var doiTuongDayDu = taoDoiTuongSanPham().fromJSON(jsonLayTuLocalStorage);
        var danhSachSanPham = JSON.parse(jsonLayTuLocalStorage);
        console.log(danhSachSanPham);
        if (danhSachSanPham == null)
            danhSachSanPham = new Array();


        var HTML = chuyenDoiDanhSachSanPhamThanhHTML(danhSachSanPham);
        console.log('html của đối tượng là:' + HTML);


        /* b3 găn đoạn html vào node trên gd */
        var nodeHienThiSanPham = document.getElementById('hien-thi-san-pham');
        nodeHienThiSanPham.innerHTML = HTML;

        function chuyenDoiDanhSachSanPhamThanhHTML(danhSachSanPham) {
            var HTMLTong = '';
            for (var i = 0; i < danhSachSanPham.length; i++) {
                var sanPham = danhSachSanPham[i];
                var HTML = chuyenDoiDoiTuongThanhHTML(sanPham);
                HTMLTong = HTMLTong + HTML;
            }
            return HTMLTong;
        }

        function chuyenDoiDoiTuongThanhHTML(sanPham) {
            sanPham = taoDoiTuongSanPham(sanPham.hinhAnh, sanPham.ten, sanPham.giaTruocKhiGiam, sanPham.phanTramGiamGia, sanPham.khuVuc, sanPham.id);
            var HTML = '';
            //todo : chuyển đổi sang html
            HTML = HTML + "<div class = 'san-pham'>";
            HTML = HTML + "    <div class = 'hien-thi-hinh-anh'>";
            HTML = HTML + "         <img src= '" + sanPham.hinhAnh + "'>";
            HTML = HTML + "     </div>"
            HTML = HTML + "    <h1 class='ten-san-pham'>" + sanPham.ten + "</h1>";
            HTML = HTML + "    <span class='gia-goc-san-pham'>" + sanPham.giaTruocKhiGiam + "đ</span>";
            HTML = HTML + "    <span class='gia-goc'>" + + sanPham.tinhGiaSauKhiGiam() + "đ</span>";
            HTML = HTML + "    <p class='khu-vuc-san-pham'>" + sanPham.khuVuc + "</p>";
            HTML = HTML + " <button onclick ='onclickDuaVaoGioHang(" + sanPham.id + ")' class='button'>Mua ngay</button>";
            HTML = HTML + "</div>";

            return HTML;
        }

        function onclickDuaVaoGioHang(idSanPham, soLuong, hinhAnh) {
            alert('Thêm vào giỏ hàng thành công');


            var danhSachItemGioHang = layGioHangTuLocalStorage();
            console.log('danh sách item giỏ hàng trước khi thêm:');
            console.log(danhSachItemGioHang);

            var coToiTaiTrongDsItemGioHang = false;
            for (var i = 0; i < danhSachItemGioHang.length; i++) {
                var itemGioHangHienTai = danhSachItemGioHang[i];

                if (itemGioHangHienTai.idSanPham == idSanPham) {
                    danhSachItemGioHang[i].soLuong++;
                    coToiTaiTrongDsItemGioHang = true;
                }
            }

            if (coToiTaiTrongDsItemGioHang == false) {
                var itemGioHang = taoDoiTuongItemGioHang(idSanPham, 1);
                danhSachItemGioHang.push(itemGioHang);
            }

            /*var danhSachItemGioHangSauKhiDuocThem = themVaoGioHang(idSanPham, danhSachItemGioHang);
            console.log('danh sách item giỏ hàng sau khi thêm:');
            console.log(danhSachItemGioHangSauKhiDuocThem);*/

            luuGioHangXuongLocalStorage(danhSachItemGioHang);


        }

        var slideIndex = 0;
        showSlides();

        function showSlides() {
            var i;
            var slides = document.getElementsByClassName("mySlides");
            var dots = document.getElementsByClassName("dot");

            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slideIndex++;
            if (slideIndex > slides.length) { slideIndex = 1 }
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" active", "");
            }
            slides[slideIndex - 1].style.display = "block";
            dots[slideIndex - 1].className += " active";
            setTimeout(showSlides, 2000);
        }


    </script>
</body>

</html>